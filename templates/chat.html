<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="robots" content="noindex">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
      integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="{{url_for('static', filename='chat.css')}}" />
    <link rel="icon" href="{{url_for('static', filename='images/chat_icon.png')}}">
    <title>MYP1080 CHATS</title>
  </head>
  <body>
    <div class="chat-container">
      <header class="chat-header">
        <a style='color: white' href='{{url_for("index")}}'><h1 id='myp-logo'>MYP1080<SUP>o</SUP> CHAT</h1></a>
        <a href="{{url_for('chat_index')}}" id='leave_button' class="btn" style='border-radius: 5px;'>Leave Room</a>
      </header>
      <script>
        window.addEventListener('onbeforeunload', function (e) {
          e.preventDefault(); 
          document.getElementById("leave_button").click();
          e.returnValue = ' '; 
        }); 
      </script>
      <main class="chat-main">
        <div class="chat-sidebar">
          <h3><i class="fas fa-comments"></i> Room Name:</h3>
          <h2 name='room_name_request' id="room-name">{{room_name}}</h2>
          <h3><i class="fas fa-users"></i> Users Online: </h3>
          <ul name='user_list_request' id="users"></ul>
        </div>
        <div class="chat-messages"></div>
      </main>
      <div class="chat-form-container">
        <form id='chat-form'>
          <input
            style='border-bottom-left-radius: 5px; border-top-left-radius: 5px;'
            id="msg"
            type="text"
            placeholder="Enter Message"
            required
            autocomplete="off"
          />
          <button type='submit' style='border-top-right-radius: 5px; border-bottom-right-radius: 5px;' id='send_message' class="btn"><i class="fas fa-paper-plane"></i></button>
        </form>
      </div>
    </div>
    <style>
      @media screen and (max-width: 600px) {
        #myp-logo {
          font-size: medium;
        }
      }
    </style>

    <script type='text/javascript'>
      const username = `{{ username|e }}`;
    </script>
    <!-- SocketIO JS -->
    <script
      type='text/javascript' src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>

    <!--Custom SocketIO JS Files-->
    <script src="{{ url_for('static', filename='chat.js') }}"></script>
  </body>
</html>